version: '3.8'

services:
  unir_app:
    container_name: unir_app_flask
    build: .
    ports:
      - "5000:5000"
    volumes:
      # Persist the database
      - ./instance:/app/instance
      # Mount credentials so they can be updated without rebuilding
      - ./credentials.json:/app/credentials.json
      - ./token.json:/app/token.json
    environment:
      - FLASK_ENV=production
      # Secret key should ideally be an env var
      - SECRET_KEY=tu_clave_secreta_produccion
    networks:
      - nginx-network
    restart: unless-stopped

networks:
  nginx-network:
    external: true
